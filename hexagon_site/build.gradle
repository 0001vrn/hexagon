
ext.siteSource = '.'
ext.siteHost = 'http://hexagonkt.com'

ext.logoSmall = 'assets/img/logo.svg'
ext.logoWide = 'assets/img/logo_wide.svg'
ext.logoLarge = 'assets/img/logo.svg'

ext.configData = [
    bootstrapVersion : '3.3.7',
    jqueryVersion : '3.2.1',
    highlightVersion : '9.12.0',
    theme : 'flatly', // also 'paper' or 'cerulean'
    cloudflare : 'http://cdnjs.cloudflare.com/ajax/libs',
    author : 'Juanjo Aguililla',
    keywords : 'Hexagon\\, microservices\\, Java\\, Kotlin',

    twitterUser : 'hexagon_kt',
    githubRepo : 'hexagonkt/hexagon',
    slackChannel : 'TODO',
    bintrayRepo : 'jamming/maven/hexagon_core',

    siteColor : '#135AA1',
    siteLogoDark : '#0073BB',
    siteLogoLight : '#2B9EE6',
    siteBackgroundDark : '#31415C', // #3F9DD8
    siteBackgroundLight : '#546691',
    siteAccentColor : '#2B9EE6', // #FFC43C

    menu : [
        'Quick Start' : 'quick_start.html',
        'Guides' : 'index.html',
        'API' : 'dokka/hexagon/index.html',
        'Roadmap' : 'contribute.html'
    ]
]

apply plugin: 'org.xbib.gradle.plugin.jbake'
apply plugin: 'org.ajoberstar.git-publish'
apply from: '../gradle/site.gradle'
apply from: '../gradle/icons.gradle'

gitPublishPush.dependsOn 'site'

gitPublish {
    final String grgitUser = System.getenv ('GRGIT_USER') ?: 'user'
    final String grgitPass = System.getenv ('GRGIT_PASS') ?: 'pass'

    repoUri = "https://$grgitUser:$grgitPass@github.com/hexagonkt/hexagon.git"
    branch = 'gh-pages'

    contents {
        from buildDir
    }
}

site.dependsOn ':hexagon_core:dokka', ':hexagon_core:jacocoTestReport'

site.doLast {
    rootProject.subprojects { module ->
        println ">>>>>>>>>>>>>>>>>>>>>>>>>>>>> $module.name | $module.buildDir"

        copy {
            from module.buildDir.absolutePath + '/dokka'
            include '**/*'
            into buildDir
//            into file (buildDir.absolutePath + "/$module.name")
        }
    }
}
