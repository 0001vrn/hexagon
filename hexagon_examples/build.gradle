
apply from: "../gradle/kotlin.gradle"
apply from: "../gradle/service.gradle"

apply plugin: 'war'

mainClassName = "com.hexagonkt.BenchmarkKt"

applicationDefaultJvmArgs = [
    '-Xms2G',
    '-Xmx2G',
    '-XX:+UseNUMA',
    '-XX:+UseParallelGC',
    '-XX:+AggressiveOpts'
]

ext.hikariVersion = '2.6.2'
ext.postgresqlVersion = '42.0.0'

war {
    archiveName = "ROOT.war"
}

installDist.dependsOn 'war'

dependencies {
    compile project(':port_store')
    compile project(':server_jetty')
    compile project(':server_undertow')
    compile project(':templates_pebble')
    compile project(':templates_rocker')

    compile ("ch.qos.logback:logback-classic:$logbackVersion") { exclude module: 'slf4j-api' }

    testCompile project(':port_client')
    testCompile project(':hexagon_test')
    testCompile ("org.testng:testng:$testngVersion")
}

test {
    useTestNG {}
}
